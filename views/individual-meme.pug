extends layout.pug

include ./mixins/follows.pug

block content
  div.userpage-header
    h1.user-title= `${meme.User.username}`
    a.userpage-header-link(href=`/users/${meme.userId}/followers` alt='followers')= "Followers"
    a.userpage-header-link(href= `/users/${meme.userId}/following` alt='following')= "Following"
    if !isCurrentUser
      if isFollowing
        +followButton(meme.userId, currentUserId, "Following")
      else
        +followButton(meme.userId, currentUserId, "Follow")
  hr.user-page
  div.userPosts
    ul
      h1.user-page= `${meme.headline}`
      h2.user-page= `${meme.caption}`

      img.user-meme(src=`${meme.link}` alt='meme')
      div.likes-and-comments
        a(href=`/` role='button')= `Likes: ${likes}`
        div Comments:
          each comment in meme.dataValues.Comments
            div.user-comment
              p= `${comment.dataValues.User.username}: ${comment.dataValues.body}`
      p.posted-on= `Posted on: ${dateFormat}`
      hr.bottom
      if currentUserId === meme.userId
        div.edit-delete
          a(href=`/memes/${meme.id}/edit`) Edit Your Meme
          a(href=`/memes/${meme.id}/delete`) Delete Your Meme
