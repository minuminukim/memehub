extends layout.pug

include ./mixins/follows.pug
include ./mixins/userpage-header.pug

append head
  link(rel="stylesheet" href="/stylesheets/components/follow-button.css")
  script(src="/javascripts/index.js" type="module" defer)
  script(src="/javascripts/comment.js" type="module" defer)

block content
  +userpageHeader(meme.User.username, meme.userId, isCurrentUser, isFollowing, currentUserId)
  hr.user-page
  div.userPosts
    ul
      h1.user-page= `${meme.headline}`
      h2.user-page= `${meme.caption}`

      img.user-meme(src=`${meme.link}` alt='meme')
      div.likes-and-comments
        a(href=`/` role='button')= `Likes: ${likes}`
      div
      input(type="message" name="content" id="content" class="content" placeholder="Write a comment.")
      button(id=`${meme.id}` class="add-button") Add Comment
      h3 Comments:
      ul
        each comment in comments
          li= `${comment.User.username}: ${comment.body} `
          if comment.userId === locals.user.id
          li= `${comment.User.username}: ${comment.body} `
            button(id=`${comment.id}`) Delete Comment
            button(id=`${comment.id}`) Edit Comment
      p.posted-on= `Posted on: ${dateFormat}`
      hr.bottom
      if currentUserId === meme.userId
        div.edit-delete
          a(href=`/memes/${meme.id}/edit`) Edit Your Meme
          a(href=`/memes/${meme.id}/delete`) Delete Your Meme
