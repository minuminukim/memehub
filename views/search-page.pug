extends layout.pug

include ./mixins/form-utils.pug

append head
  link(rel='stylesheet' href='/stylesheets/components/search-page')

block content
  .spacing-more
  p.username Find a meme by a keyword in the headline or caption
  .root-new-meme
    h1.user-page Search
      div.form
      +validationErrorSummary(errors)
      form(action='/search' method='post')
        input(type='hidden' name='_csrf' value=csrfToken)
        div.spacing
        +field(null, 'search', search, 'text', 'Enter keywords here...')
        div.post-cancel
          button.submit-meme-button(type='submit') Search
          div.spacing-more
          a.small-font(href='/') Click Here To Cancel
          div.spacing-more
  if search
    hr.bottom
    if findMeme.length === 0
      .root-new-meme
        h1 We couldn't find any posts.
    .root-new-meme
      div.search-meme-feed
        ul
          each meme in findMeme
            h1.user-page(href=`/memes/${meme.id}`)= `${meme.dataValues.headline}`
            div.spacing-more
            h2.user-page= `${meme.dataValues.caption}`
            div.spacing-more
            a(href=`/memes/${meme.id}`): img.user-meme(src=`${meme.dataValues.link}` alt='meme')
            p.posted-on= `Posted on ${meme.dataValues.updatedAt.toLocaleDateString("en-US")}`
            div.spacing-more
            hr.bottom
            div.end-of-post
            div.spacing-more
